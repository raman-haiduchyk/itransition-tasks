<mat-sidenav-container class="nav-container mat-elevation-z2">

  <mat-sidenav #sidenav [mode]="mode" [opened]="opened">

    <button mat-icon-button (click)="sidenav.toggle()" fxHide.gt-xs><mat-icon>close</mat-icon></button>

    <div class="chap-list" fxLayout="column" *ngIf="funfic && funfic.chapters">

      <h2>Chapters:</h2>

      <div cdkDropList class="list" (cdkDropListDropped)="drop($event)" fxLayout="column">
        <div matRipple class="chapter" *ngFor="let chapter of funfic.chapters; let i = index" cdkDrag>{{i+1}}. {{chapter.name}}</div>
        <button mat-button><mat-icon>add</mat-icon></button>
      </div>

      <mat-form-field class="input-field">
        <mat-label>Genre</mat-label>
        <input matInput type="text" [(ngModel)]="funfic.genre">
      </mat-form-field>

      <mat-form-field class="input-field" appearance="outline">
        <mat-label>Tags</mat-label>

        <mat-chip-list #chipList aria-label="Fruit selection">
          <mat-chip color="accent" selectable removable (removed)="remove(tag)" *ngFor="let tag of funfic.tags">
            {{tag}} <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>

          <input #tagsInput [formControl]="tagsCtrl" placeholder="New tag..." [matChipInputFor]="chipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matAutocomplete]="auto" (matChipInputTokenEnd)="add($event)">

        </mat-chip-list>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
          <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
            {{tag}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

    </div>
  </mat-sidenav>

  <mat-sidenav-content class="content" fxLayout="column" fxLayoutAlign="center center">
    <mat-spinner *ngIf="!(funfic && funfic.chapters)"></mat-spinner>
      <div class="editor" fxLayout="column" fxLayoutAlign="start center" *ngIf="funfic && funfic.chapters">
        <button mat-stroked-button (click)="sidenav.toggle()" class="toggle-button" fxHide.gt-xs>Chapters and tags</button>
        <h1>{{funfic.name}}</h1>
        <quill-editor></quill-editor>
      </div>
      <button mat-stroked-button *ngIf="funfic && funfic.chapters">Save Changes</button>
  </mat-sidenav-content>

</mat-sidenav-container>

